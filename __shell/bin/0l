#! /usr/bin/env tclsh

###############################################################################
# 0l: desktop utility for reading logs (presumes socklog on void)

source $::env(HOME)/bin/lib.tcl

###############################################################################

set dir /var/log/socklog
set what wayland.log
switch -- [lindex $::argv 0] {
  {} - w - x - wayland - wm - xorg {
    set dir $::env(HOME)/log
    if {{x} eq $SESS} { set what x.log }
  }
  a - all      { set what everything/current }
  b - debug    { set what debug/current }
  d - daemon   { set what daemon/current}
  e - errors   { set what errors/current }
  k - kernel   { set what kernel/current }
  m - messages { set what messages/current }
  s - secure   { set what secure/current }
  default { ufail {[?|a_ll|d_aemon|de_b_ug|e_rrors|k_ernel|m_essages|s_ecure|w_m]} }
}

catch {exec -- >/dev/tty cat $dir/$what | less}

